#!/usr/bin/env bash
# ğŸ¤– Ollama AI Integration - Complete Setup & Testing Guide
# For BudgetwiseAI Expense Tracker

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  ğŸ¤– Ollama AI Integration - BudgetwiseAI Expense Tracker      â•‘"
echo "â•‘  Complete Implementation & Testing Guide                       â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Color codes
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m' # No Color

echo -e "${BLUE}ğŸ“‹ IMPLEMENTATION SUMMARY${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo -e "${GREEN}âœ… Backend Integration (Spring Boot)${NC}"
echo "   â€¢ AIController.java - REST endpoints for AI insights"
echo "   â€¢ OllamaService.java - Ollama integration service"
echo "   â€¢ AIInsightRequest.java - Request DTO"
echo "   â€¢ AIInsightResponse.java - Response DTO"
echo "   â€¢ application.properties - Ollama configuration"
echo ""

echo -e "${GREEN}âœ… Frontend Integration (React)${NC}"
echo "   â€¢ AIInsights.js - Professional AI chat component"
echo "   â€¢ AIInsights.css - Advanced animations & styling"
echo "   â€¢ Theme context integration for dark/light mode"
echo "   â€¢ Real-time API communication with Axios"
echo ""

echo -e "${GREEN}âœ… Features Implemented${NC}"
echo "   â€¢ Real-time AI chat with message history"
echo "   â€¢ Financial stats dashboard (Income, Expenses, Balance)"
echo "   â€¢ 4 Quick action buttons (Spending, Budget, Save, Investment)"
echo "   â€¢ AI response categorization (Saving, Spending, Budget, etc.)"
echo "   â€¢ Auto-scroll to latest message"
echo "   â€¢ Loading states & error handling"
echo "   â€¢ Dark/Light mode support"
echo "   â€¢ Mobile responsive design"
echo "   â€¢ Advanced animations (slideIn, fadeIn, bounce, pulse, glow)"
echo ""

echo -e "${YELLOW}âš™ï¸  CONFIGURATION${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Ollama Service:"
echo "  Base URL: http://localhost:11434"
echo "  Model: llama2"
echo "  Timeout: 120 seconds"
echo ""
echo "Backend:"
echo "  Port: 8080"
echo "  Auth: JWT (Spring Security)"
echo ""
echo "Frontend:"
echo "  Port: 3000"
echo "  Framework: React 18 + Hooks"
echo ""

echo -e "${BLUE}ğŸš€ QUICK START (3 TERMINAL WINDOWS)${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo -e "${YELLOW}Terminal 1: Start Ollama${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "$ ollama run llama2"
echo ""
echo "Expected output:"
echo "  âœ“ Listening on 127.0.0.1:11434"
echo "  âœ“ Loading model... (first time takes 1-2 minutes)"
echo ""

echo -e "${YELLOW}Terminal 2: Start Backend${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "$ cd backend"
echo "$ mvn spring-boot:run"
echo ""
echo "Expected output:"
echo "  âœ“ Started BudgetwiseApplication in X seconds"
echo "  âœ“ Listening on port 8080"
echo ""

echo -e "${YELLOW}Terminal 3: Start Frontend${NC}"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "$ cd frontend"
echo "$ npm start"
echo ""
echo "Expected output:"
echo "  âœ“ Webpack compiled successfully"
echo "  âœ“ Browser opens http://localhost:3000"
echo ""

echo ""
echo -e "${BLUE}ğŸ“– USAGE GUIDE${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "1. LOGIN"
echo "   â€¢ Open http://localhost:3000"
echo "   â€¢ Register or login with existing credentials"
echo ""

echo "2. NAVIGATE TO AI INSIGHTS"
echo "   â€¢ Click 'AI Insights' in the sidebar"
echo "   â€¢ Page loads with financial stats and chat interface"
echo ""

echo "3. INTERACT WITH AI"
echo "   Option A: Use Quick Actions"
echo "   â€¢ Click any of the 4 quick action buttons:"
echo "     - ğŸ“Š Analyze Spending"
echo "     - ğŸ’¡ Budget Tips"
echo "     - ğŸ’° Save Money"
echo "     - ğŸ“ˆ Investment Tips"
echo ""
echo "   Option B: Type Custom Query"
echo "   â€¢ Type in the input field at bottom"
echo "   â€¢ Press Enter or click ğŸš€ button"
echo "   â€¢ See AI response appear in chat"
echo ""

echo "4. VIEW RESULTS"
echo "   â€¢ Financial stats update in real-time"
echo "   â€¢ AI responses show with category tags"
echo "   â€¢ Chat history is preserved during session"
echo ""

echo ""
echo -e "${BLUE}ğŸ’¬ EXAMPLE QUERIES${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  'Analyze my spending patterns'"
echo "  'Give me budget recommendations'"
echo "  'How can I save more money each month?'"
echo "  'What investment strategies would you recommend?'"
echo "  'Tell me about my financial health'"
echo "  'Which categories are my biggest expenses?'"
echo "  'How much should I save monthly?'"
echo "  'What are my income sources?'"
echo ""

echo ""
echo -e "${BLUE}ğŸ”Œ API ENDPOINTS${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "POST /api/ai/insights"
echo "  Request:"
echo "    {"
echo "      \"query\": \"How can I reduce my spending?\","
echo "      \"context\": \"\""
echo "    }"
echo ""
echo "  Response:"
echo "    {"
echo "      \"insight\": \"Based on your spending patterns...\","
echo "      \"category\": \"Saving\","
echo "      \"recommendation\": \"Consider setting budget limits...\""
echo "    }"
echo ""

echo "GET /api/ai/spending-analysis"
echo "  â€¢ Auto-generates spending pattern analysis"
echo "  â€¢ Requires authentication (JWT)"
echo ""

echo "GET /api/ai/budget-recommendations"
echo "  â€¢ Auto-generates budget optimization tips"
echo "  â€¢ Requires authentication (JWT)"
echo ""

echo ""
echo -e "${BLUE}ğŸ”§ TESTING CHECKLIST${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo -e "${YELLOW}Network & Services${NC}"
echo "  [ ] Ollama running: curl http://localhost:11434/api/tags"
echo "  [ ] Backend running: curl http://localhost:8080/api/health"
echo "  [ ] Frontend running: http://localhost:3000"
echo ""

echo -e "${YELLOW}Authentication${NC}"
echo "  [ ] Can login successfully"
echo "  [ ] JWT token in localStorage"
echo "  [ ] Sidebar shows username"
echo ""

echo -e "${YELLOW}AI Insights Page${NC}"
echo "  [ ] Page loads without errors"
echo "  [ ] Financial stats display (Income, Expenses, Balance)"
echo "  [ ] Chat interface is visible"
echo "  [ ] 4 quick action buttons are clickable"
echo "  [ ] Input field accepts text"
echo ""

echo -e "${YELLOW}AI Functionality${NC}"
echo "  [ ] Quick action triggers response"
echo "  [ ] Custom query sends to backend"
echo "  [ ] AI response appears in chat"
echo "  [ ] Response has category tag"
echo "  [ ] Messages auto-scroll"
echo "  [ ] Loading indicator shows"
echo ""

echo -e "${YELLOW}Dark/Light Mode${NC}"
echo "  [ ] Page displays correctly in dark mode"
echo "  [ ] Text is readable"
echo "  [ ] Colors match theme"
echo "  [ ] Can toggle theme"
echo ""

echo -e "${YELLOW}Responsive Design${NC}"
echo "  [ ] Works on desktop (1920px)"
echo "  [ ] Works on tablet (768px)"
echo "  [ ] Works on mobile (375px)"
echo "  [ ] Input not zoomed on mobile"
echo ""

echo ""
echo -e "${BLUE}ğŸ› TROUBLESHOOTING${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo -e "${YELLOW}Issue: \"Connection refused\" at localhost:11434${NC}"
echo "  Solution: Start Ollama service"
echo "  $ ollama run llama2"
echo ""

echo -e "${YELLOW}Issue: \"No model named llama2\"${NC}"
echo "  Solution: Download the model"
echo "  $ ollama pull llama2"
echo ""

echo -e "${YELLOW}Issue: Backend shows \"No Spring Context\"${NC}"
echo "  Solution: Make sure all dependencies are installed"
echo "  $ mvn clean install"
echo "  $ mvn spring-boot:run"
echo ""

echo -e "${YELLOW}Issue: Frontend shows \"Failed to fetch /api/ai/insights\"${NC}"
echo "  Solution: Check backend is running on port 8080"
echo "  Check CORS is enabled (it is by default)"
echo ""

echo -e "${YELLOW}Issue: Stats showing as 0 or undefined${NC}"
echo "  Solution: Make sure you have transactions in the system"
echo "  Add some income/expense transactions first"
echo ""

echo -e "${YELLOW}Issue: AI response is slow (30+ seconds)${NC}"
echo "  Solution: This is normal. llama2 takes 5-30 seconds per query"
echo "  To speed up: use shorter queries"
echo ""

echo -e "${YELLOW}Issue: Message input not responding${NC}"
echo "  Solution: Check browser console (F12) for errors"
echo "  Check backend logs for API errors"
echo ""

echo ""
echo -e "${BLUE}ğŸ“ FILE LOCATIONS${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "Backend:"
echo "  controller/AIController.java"
echo "  service/OllamaService.java"
echo "  dto/AIInsightRequest.java"
echo "  dto/AIInsightResponse.java"
echo "  resources/application.properties"
echo ""

echo "Frontend:"
echo "  pages/AIInsights.js"
echo "  styles/AIInsights.css"
echo ""

echo ""
echo -e "${BLUE}ğŸ¨ DESIGN FEATURES${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "Animations:"
echo "  â€¢ slideInDown - Header entrance animation"
echo "  â€¢ slideInUp - Card and message entrance"
echo "  â€¢ fadeIn - Container load"
echo "  â€¢ pulse - Loading states"
echo "  â€¢ bounce - Typing indicator dots"
echo "  â€¢ float - Floating emoji in empty state"
echo "  â€¢ glow - Hover effect on messages"
echo ""

echo "Colors (Dark Mode):"
echo "  â€¢ Primary: Indigo (#6366f1)"
echo "  â€¢ Secondary: Purple (#8b5cf6)"
echo "  â€¢ Accent: Pink (#ec4899)"
echo "  â€¢ Text: #e0e7ff"
echo "  â€¢ Background: #0f172a â†’ #1e293b"
echo ""

echo "Responsive Breakpoints:"
echo "  â€¢ Desktop: 1024px+"
echo "  â€¢ Tablet: 768px"
echo "  â€¢ Mobile: 480px"
echo ""

echo ""
echo -e "${BLUE}âš¡ PERFORMANCE TIPS${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "For faster responses:"
echo "  1. Keep queries short and specific"
echo "  2. Use the Quick Actions (they're optimized)"
echo "  3. Ensure Ollama has enough RAM (3GB+ recommended)"
echo "  4. Close other heavy applications"
echo ""

echo "For better insights:"
echo "  1. Add more transactions first"
echo "  2. Include financial context in queries"
echo "  3. Ask specific questions about your data"
echo "  4. Reference recent time periods"
echo ""

echo ""
echo -e "${BLUE}ğŸ“Š NEXT STEPS${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "Immediate (Get it running):"
echo "  â˜ Start Ollama service"
echo "  â˜ Start Spring Boot backend"
echo "  â˜ Start React frontend"
echo "  â˜ Login and test"
echo ""

echo "Short-term (Verify everything works):"
echo "  â˜ Test quick action buttons"
echo "  â˜ Try custom queries"
echo "  â˜ Check dark/light mode"
echo "  â˜ Test on mobile"
echo ""

echo "Medium-term (Optional enhancements):"
echo "  â˜ Add ChatbotButton to main layout"
echo "  â˜ Implement response caching"
echo "  â˜ Add typing indicators"
echo "  â˜ Persist chat history to database"
echo ""

echo ""
echo -e "${GREEN}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
echo -e "${GREEN}â•‘                                                                â•‘${NC}"
echo -e "${GREEN}â•‘  âœ¨ Ollama AI Integration Complete! âœ¨                        â•‘${NC}"
echo -e "${GREEN}â•‘                                                                â•‘${NC}"
echo -e "${GREEN}â•‘  Your expense tracker now has AI-powered financial insights!  â•‘${NC}"
echo -e "${GREEN}â•‘                                                                â•‘${NC}"
echo -e "${GREEN}â•‘  ğŸš€ Start with \"Quick Start\" section above                    â•‘${NC}"
echo -e "${GREEN}â•‘                                                                â•‘${NC}"
echo -e "${GREEN}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""

echo -e "${BLUE}ğŸ“ SUPPORT${NC}"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Documentation: OLLAMA_AI_INTEGRATION_SUMMARY.md"
echo "Quick Start: QUICK_START_AI.md"
echo "This Guide: AI_SETUP_GUIDE.md"
echo ""
echo "Still having issues?"
echo "  1. Check browser console (F12) for frontend errors"
echo "  2. Check terminal/logs for backend errors"
echo "  3. Verify Ollama is running: curl http://localhost:11434/api/tags"
echo "  4. Check internet connection (for large model loads)"
echo ""
